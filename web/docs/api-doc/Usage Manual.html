<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit; background-repeat: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit; background-repeat: inherit; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print { 
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) { 
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) { 
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571429rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit; background-repeat: inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
  --title-color: #8064a9;
  --text-color: #444444;
  --light-text-color: #666666;
  --lighter-text-color: #888888;
  --link-color: #2aa899;
  --code-color: #745fb5;

  --shadow-color: #eee;
  --border-quote: rgba(116, 95, 181, 0.2);
  --border: #e7e7e7;
  --link-bottom: #bbb;
  --shadow: 3px 3px 10px var(--shadow-color);
  --inline-code-bg: #f4f2f9;

  --header-weight: normal;

  --side-bar-bg-color: #fafafa;
  --control-text-color: var(var(--light-text-color));
  --active-file-text-color: var(--title-color);
  --active-file-bg-color: var(--shadow-color);
  --item-hover-bg-color: var(--shadow-color);
  --active-file-border-color: var(var(--title-color));

  --base-font: "Helvetica Neue", -apple-system, Ubuntu,
    "Microsoft YaHei", Helvetica, "Nimbus Sans L", Arial, "Liberation Sans",
    "Noto Sans CJK SC", "PingFang SC", "Hiragino Sans GB", "Source Han Sans SC",
    "Source Han Sans CN", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti",
    SimHei, "WenQuanYi Zen Hei Sharp", "Source Sans Pro", sans-serif;
  --title-font: "EB Garamond", Georgia, "Noto Serif", "Noto Serif CJK SC",
    "Nimbus Roman No9 L", "Songti SC", "Source Han Serif SC",
    "Source Han Serif CN", STSong, "AR PL New Sung", "AR PL SungtiL GB", NSimSun,
    SimSun, "TW\-Sung", "WenQuanYi Bitmap Song", "AR PL UMing CN",
    "AR PL UMing HK", "AR PL UMing TW", "AR PL UMing TW MBE", PMingLiU, MingLiU,
    "Ubuntu", "Source Sans Pro", serif;
  --monospace: "JetBrains Mono", "Fira Code", "Cascadia Code", "Sarasa Term SC",
    Monaco, "Deja Vu Sans Mono", Consolas, "Lucida Console", "Andale Mono",
    "Roboto Mono", Courier, Monospace !important;
}

/* 打印 */
@media print {
  html {
    font-size: 0.9rem;
  }

  table,
  pre {
    page-break-inside: avoid;
  }

  pre {
    word-wrap: break-word;
  }
  #write {
    max-width: 100%;
  }
  @page {
    size: A3; /* PDF output size */
    margin-left: 0;
    margin-right: 0;
  }
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-rendering: optimizelegibility;
  -webkit-font-smoothing: initial;
}

body {
  color: var(--text-color);
  -webkit-font-smoothing: antialiased;
  line-height: 1.6rem;
  letter-spacing: 0;
  overflow-x: hidden;
}

/* 页边距 和 页面大小 */
#write {
  font-family: var(--base-font);
  /* max-width: 914px; */
  margin: 0 auto;
  padding: 1rem 4rem;
  padding-bottom: 100px;
}

#write p {
  line-height: 1.6rem;
  word-spacing: 0.05rem;
}

body > *:first-child {
  margin-top: 0 !important;
}

body > *:last-child {
  margin-bottom: 0 !important;
}

/* Link 链接 */
a {
  color: var(--link-color);
  text-decoration: none;
}
#write a {
  border-bottom: 1px solid var(--link-bottom);
}
#write a:hover {
  border-bottom: 1px solid var(--link-color);
  /*   color: var(--link-color);
    text-decoration: none; */
}

.md-content {
  color: var(--light-text-color);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  position: relative;
  margin-top: 2rem;
  margin-bottom: 1rem;
  font-weight: var(--header-weight);
  line-height: 1.3;
  cursor: text;
  color: var(--title-color);
  font-family: var(--title-font);
}

h1 {
  text-align: center;
  font-size: 2.25em;
  margin-bottom: 2rem;
}
h1:after {
  content: "";
  display: block;
  margin: 0.2em auto 0;
  width: 6rem;
  height: 2px;
  border-bottom: 2px solid var(--title-color);
}

h2 {
  padding-left: 0.4em;
  font-size: 1.75em;
  border-left: 0.4em solid var(--title-color);
  border-bottom: 1px solid var(--title-color);
}
h3 {
  font-size: 1.5em;
}
h4 {
  font-size: 1.3em;
}
h5 {
  font-size: 1.2em;
}
h6 {
  font-size: 1.1em;
}

p,
blockquote,
ul,
ol,
dl,
table {
  margin: 0.8em 0;
}

/* horizontal rule */
hr {
  margin: 1.5em auto;
  border-top: 1px solid var(--border);
}

/* 列表 */
li > ol,
li > ul {
  margin: 0 0;
}

li p.first {
  display: inline-block;
}

ul,
ol {
  padding-left: 2rem;
}

ul:first-child,
ol:first-child {
  margin-top: 0;
}

ul:last-child,
ol:last-child {
  margin-bottom: 0;
}

#write ol li,
ul li {
  padding-left: 0.1rem;
}

/* 引用 */
blockquote {
  border-left: 0.3rem solid var(--border-quote);
  padding-left: 1em;
  color: var(--light-text-color);
  font-family: var(--base-font);
}

/* 表格 */
table {
  margin-bottom: 1.25rem;
}
table th,
table td {
  padding: 8px;
  line-height: 1.25rem;
  vertical-align: middle;
  border: 1px solid #ddd;
}
table th {
  font-weight: bold;
}
table thead th {
  vertical-align: middle;
}
table tr:nth-child(2n),
thead {
  background-color: #fcfcfc;
}

/* 粗体 */
#write strong {
  padding: 0 2px;
  font-weight: bold;
}

/* inline code */
#write code,
tt {
  padding: 2px 4px;
  border-radius: 0.3rem;
  font-family: var(--monospace);
  font-size: 0.9rem;
  color: var(--code-color);
  background-color: var(--inline-code-bg);
  margin: 0 2px;
}

#write .md-footnote {
  color: var(--code-color);
  background-color: var(--inline-code-bg);
}

/* highlight. */
#write mark {
  background: rgb(255, 255, 196);
}

#write del {
  padding: 1px 2px;
}

.md-task-list-item > input {
  margin-left: -1.3em;
}

#write pre.md-meta-block {
  padding: 1rem;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border: 0;
  border-radius: 3px;
  color: #777777;
  margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
  bottom: 0.375rem;
}

/* 图片 */
.md-image > .md-meta {
  border-radius: 3px;
  font-family: var(--monospace);
  padding: 2px 0 0 4px;
  font-size: 0.9em;
  color: inherit;
}
/* 图片靠左显示 */
/* p .md-image:only-child {
  width: auto;
  text-align: left;
  margin-left: 2rem;
} */

/* 写![shadow-...]() 显示图片阴影 */
img[alt|="shadow"] {
  box-shadow: var(--shadow);
}

/* TOC: 加粗h2 */
#write a.md-toc-inner {
  line-height: 1.6;
  white-space: pre-line;
  border-bottom: none;
  color: var(--lighter-text-color);
  font-size: 0.9rem;
}
/* .md-toc-h1 {
  display: none;
} */
.md-toc-h2 .md-toc-inner {
  font-weight: bold;
}

header,
.context-menu,
.megamenu-content,
footer {
  font-family: var(--base-font);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
  visibility: visible;
}

.md-lang {
  color: #b4654d;
}

.html-for-mac .context-menu {
  --item-hover-bg-color: #e6f0fe;
}

/* Code fences */

/* border, bg, font */
.md-fences {
  border: 1px solid var(--border);
  border-radius: 5px;
  background: #fdfdfd !important;
  font-size: 0.9rem;
}
/* 代码框阴影 */
#write pre.md-fences {
  display: block;
  -webkit-overflow-scrolling: touch;
  box-shadow: var(--shadow);
}

.cm-s-inner {
  padding: 0.25rem;
  border-radius: 0.25rem;
}

.cm-s-inner.CodeMirror,
.cm-s-inner .CodeMirror-gutters {
  color: #3a3432 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  color: #6d8a88;
}

.cm-s-inner .CodeMirror-linenumber {
  padding: 0 0.1rem 0 0.3rem;
  color: #b8b5b4;
}

.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a34e8f !important;
}

#fences-auto-suggest .active {
  background: #ddd;
}

.cm-s-inner span.cm-comment {
  color: #9daab6;
}
.cm-s-inner span.cm-builtin {
  color: #0451a5;
}

/* language tip */
#write .code-tooltip {
  border: 1px solid var(--border);
}

.auto-suggest-container {
  border-color: #b4b4b4;
}

.auto-suggest-container .autoComplt-hint.active {
  background: #b4b4b4;
  color: inherit;
}

/* task list */
#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid #b4b4b4;
  border-radius: 0.2rem;
  margin-top: 0.3rem;
  height: 1rem;
  width: 1rem;
  transition: background 0.3s;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: #ddd;
}

#write .md-task-list-item > input[checked]::before {
  content: "";
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: #333;
}

#write .md-task-list-item > input[checked]::after {
  content: "";
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: #333;
}

#write .md-task-list-item > p {
  transition: color 0.3s, opacity 0.3s;
}

#write .md-task-list-item.task-list-done > p {
  color: #b4b4b4;
  text-decoration: line-through;
}

#write .md-task-list-item.task-list-done > p > .md-emoji {
  opacity: 0.5;
}

#write .md-task-list-item.task-list-done > p > .md-link > a {
  opacity: 0.6;
}

/* sidebar */
#typora-sidebar,
.typora-node #typora-sidebar {
  box-shadow: 3px 0px 10px var(--shadow-color);
}
.sidebar-content-content {
  font-size: 0.9rem;
}
@import "";

:root {
  --title-color: var(--text-color);
  --link-color: #337ab7;
  --code-color: #0072be;
  --border-quote: #eee;
  --header-weight: bold;
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						} @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>README</title>
</head>
<body class='typora-export typora-export-show-outline typora-export-collapse-outline'><div class='typora-export-content'>
<div class="typora-export-sidebar"><div class="outline-content"><li class="outline-item-wrapper outline-h1 outline-item-open"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#commandparser">CommandParser</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h2 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#简介">简介</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#安装与使用-commandparser">安装与使用 CommandParser</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#快速入门">快速入门</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#0-写在前面">0. 写在前面</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#1-启动参数管理界面">1. 启动参数管理界面</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#2-添加参数">2. 添加参数</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#3-配置参数属性-command-面板">3. 配置参数属性 (Command 面板)</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#4-配置参数规则-other-option-面板">4. 配置参数规则 (Other Option 面板)</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#5-配置全局规则-other-option-面板">5. 配置全局规则 (Other Option 面板)</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#6-搜索指令">6. 搜索指令</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#7-预览文档-preview-面板">7. 预览文档 (Preview 面板)</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#8-测试指令-parser-testing-面板">8. 测试指令 (Parser Testing 面板)</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#9-导出指令文件">9. 导出指令文件</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#10-在-java-脚本中使用当前指令文件">10. 在 Java 脚本中使用当前指令文件</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#101-使用-command-命令文件">10.1 使用 Command 命令文件</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#102-使用-java-脚本文件">10.2 使用 Java 脚本文件</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#11-打包项目为-jar-包--------以-idea-为例">11. 打包项目为 jar 包 —— 以 IDEA 为例</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h2 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#command-文件格式">Command 文件格式</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h2 outline-item-open"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#开发文档">开发文档</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#创建解析器">创建解析器</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#设置解析器的全局参数">设置解析器的全局参数</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#向解析器中注册指令">向解析器中注册指令</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#设置指令的参数">设置指令的参数</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#设置指令间的规则">设置指令间的规则</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#导出解析器">导出解析器</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#使用解析器解析指令">使用解析器解析指令</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#高级语法-自定义转换器与验证器">高级语法: 自定义转换器与验证器</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h2 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#项目实例">项目实例</a></div><ul class="outline-children"></ul></li></ul></li></div></div><div id='write'  class=''><h1 id='commandparser'><span>CommandParser</span></h1><h2 id='简介'><span>简介</span></h2><p><span>将程序封装为可运行的 jar 包，能够方便不同平台之间传输、使用，而不需要考虑 IDE 环境而进行繁琐的配置。通常 jar 包就包含了完成一套计算/分析/服务所需的全部代码，为了让 jar 包可以根据不同的输入参数执行不同的任务，以提升开发效率、用户交互体验，就需要进行命令行开发。</span></p><p><span>CommandParser 是一个基于 Java 平台开发的小型框架，用于解析、管理命令行参数。CommandParser 提供了脚本指令设计方式及图形化设计方式，便于用户方便地设计、管理命令行程序。</span></p><p><span>CommandParser 兼有传统命令行设计工具 Jcommander 的特点及独特的 GUI 图形化设计功能，在内测阶段已证实可以有效降低 Java 开发者编写命令行工具的门槛，降低代码耦合度。</span></p><blockquote><p><span>技术问题请联系 张柳彬 (</span><a href='mailto:suranyi.sysu@gmail.com' target='_blank' class='url'>suranyi.sysu@gmail.com</a><span>, 一定能看到，但是时效性不保证)</span></p><p><span>知乎ID: Suranyi (工作日随缘回复，非工作日 8 小时内回复)</span></p></blockquote><h2 id='安装与使用-commandparser'><span>安装与使用 CommandParser</span></h2><p><span>CommandParser 在 JDK 8 中开发完成，得益于 Java 跨平台的特性，我们预计它也可以在所有支持 Java 语言的软件与硬件环境中运行。</span></p><ul><li><span>在 Windows 和 MacOS 下，当设备准确配置了JDK运行环境时，可以双击启动图形界面；</span></li><li><span>在 Java 脚本程序中，可以通过导入该包进行使用。</span></li></ul><figure><table><thead><tr><th><span>Type</span></th><th><span>File</span></th></tr></thead><tbody><tr><td><span>Package</span></td><td><a href='http://pmglab.top/commandParser/commandParser-1.0.jar'><span>CommandParser-1.0.jar</span></a></td></tr><tr><td><span>Source codes</span></td><td><a href='https://github.com/Zhangliubin/commandParser-1.0'><span>CommandParser-1.0</span></a></td></tr><tr><td><span>说明文档</span></td><td><a href='http://pmglab.top/commandParser/' target='_blank' class='url'>http://pmglab.top/commandParser/</a></td></tr></tbody></table></figure><h2 id='快速入门'><span>快速入门</span></h2><h3 id='0-写在前面'><span>0. 写在前面</span></h3><p><span>我们建议阅读本文 “快速入门” 部分，以了解 commandParser 的使用方式。当你熟练掌握 commandParser 后，开发一个程序所需的命令行工具，甚至只需要几分钟时间。我们也鼓励现有的项目使用我们的 commandParser，尽管刚开始的迁移会有一点点痛苦 （主要是复制、粘贴，但我保证这是最轻松的迁移方式了！），但后续的扩展、管理会获得极大的收益。</span></p><p><span>我们在 github 上传了</span><a href='https://github.com/Zhangliubin/commandParser-1.0'><span>本项目的源码</span></a><span>，在 </span><code>src/dev/fromcommandfile/command</code><span> 中提供了 7 个可供测试的指令文件 （动动你的手，将他们拖动到 commandParser 窗口中吧！），以及指令文件的使用方式提供参考。CommandParser 提供了两种方式导出设计的指令文件（*.cp 命令文件和 *.java 脚本文件），相应地也有两种使用方式，示例代码存放在：</span></p><ul><li><code>src/dev/fromcommandfile</code><span>: 从指令文件中加载参数解析器，并进行后续开发的实例</span></li><li><code>src/dev/fromjavascript</code><span>: 使用纯 Java 脚本编写指令文件（实际上这些文件是通过图形界面将 </span><code>src/dev/fromcommandfile/command</code><span> 转换为 Java 脚本文件实现的），并进行后续开发的实例</span></li></ul><h3 id='1-启动参数管理界面'><span>1. 启动参数管理界面</span></h3><p><strong><span>方法1:</span></strong><span> 在具有图形界面的操作系统上双击 commandParser.jar，打开图形界面 (需要操作系统配置了 java 环境)</span></p><p><strong><span>方法2:</span></strong><span> 在具有图形界面的操作系统上使用终端 (terminal)，输入 </span><code>java -jar ./commandParser-1.0.jar</code></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxtnd2n1u1j31e00u00uh.jpg" referrerpolicy="no-referrer" alt="图1"></p><h3 id='2-添加参数'><span>2. 添加参数</span></h3><p><strong><span>方法1:</span></strong><span> 双击空白处，在末尾追加新的参数</span></p><p><strong><span>方法2:</span></strong><span> 点击左下角 </span><code>+</code><span>，在选中位置插入新的参数</span></p><p><strong><span>方法3:</span></strong><span> 点击右下角 </span><code>Open</code><span> 或拖拽一个文件到窗口中，将导入该参数文件中所有的参数</span></p><h3 id='3-配置参数属性-command-面板'><span>3. 配置参数属性 (Command 面板)</span></h3><p><span>每个参数都有 12 个基本属性，其中 commandName, convertTo 和 arity 是建议设置的属性。每个属性的含义如下：</span></p><figure><table><thead><tr><th><span>属性</span></th><th><span>含义</span></th></tr></thead><tbody><tr><td><span>commandName</span></td><td><details><summary><span>识别的参数名 (关键字)</span></summary><span>1. 参数名支持的字符类型: 阿拉伯数字 </span><code>0-9</code><span>、大小写字母 </span><code>a-zA-z</code><span>、部分特殊字符 </span><code>+-_</code><span> </span><br><span>2. 多个参数名定位到同一参数时，使用 </span><code>,</code><span> 进行分隔，第一个参数名将注册为主参数名</span><br><span>3. 所有的参数名 (无论是否为主参数名) 都不可重复</span></details></td></tr><tr><td><span>request</span></td><td><details><summary><span>是否为必备参数</span></summary><span>1. 在文档提示中，必备参数前有 </span><code>*</code><span> 标记</span><br><span>2. 设置为 request 的参数是必须传入的，若缺少必备参数则会抛出异常</span></details></td></tr><tr><td><span>default</span></td><td><details><summary><span>设置默认值</span></summary><span>1. 当 default 包含</span><code>,</code><span>并且捕获的参数值个数不为 1 或 0 时，default 将按照 </span><code>,</code><span> 切割为数组</span><br><span>2. 未指定默认值时，将设置为 </span><code>null</code></details></td></tr><tr><td><span>convertTo</span></td><td><details><summary><span>参数转换的数据类型</span></summary><span>1. 默认值 (default) 和输入的参数值都会被 convertTo 转为对应的 Java 对象 (例如 </span><code>string-array</code><span> 类型在 Java 中对应 </span><code>String[]</code><span>。有关各个转换器对应的参数类型，请阅读 </span><a href='#设置指令的参数'><span>开发文档</span></a><span>)</span><br><span>2. built-in 类型需要在 Java 脚本中重新调用 </span><code>parser.getCommandItem($commandName).convertTo($myConvertor)</code><span>进行设置</span><br><span>3. </span><code>passedIn</code><span> 类型为传入类型，即仅验证参数是否被传入，而不捕获任何值</span></details></td></tr><tr><td><span>validateWith</span></td><td><details><summary><span>使用验证器验证参数值</span></summary><span>1. 多个验证器使用 </span><code>;</code><span> 进行分隔</span><br><span>2. built-in 类型需要在 Java 脚本中重新调用 </span><code>parser.getCommandItem($commandName).validateWith($myValidator)</code><span>进行设置</span><br><span>3. </span><code>passedIn</code><span> 类型禁止设置验证器 (即该项必须为</span><code>.</code><span>)</span><br><span>4. </span><code>ElementOf($value,$value,...)</code><span> 为限定元素验证器，即元素的值必须在列出的项目中。它的元素值被识别为字符串类型，即 </span><code>string</code><span>, </span><code>string-array</code><span>, </span><code>k1=v1;k2=v2;...</code><span>, </span><code>&lt;start&gt;-&lt;end&gt; (string)</code><span>, </span><code>&lt;index&gt;:&lt;start&gt;-&lt;end&gt; (string)</code><span> 类型支持此验证器，其余类型需要用户在命令脚本中定义规则。此外，元素值支持的字符类型为：阿拉伯数字 </span><code>0-9</code><span>、大小写字母 </span><code>a-zA-z</code><span>、部分特殊字符 </span><code>+-_./</code><span> </span></details></td></tr><tr><td><span>arity</span></td><td><details><summary><span>参数长度</span></summary><span>1. 捕获到参数关键字时，之后的 arity 个字段都识别为它的值</span><br><span>2. 参数长度为 </span><code>≥1</code><span> 时，将捕捉随后的多个字段，直到遇到下一个参数关键字</span><br><span>3.  </span><code>convertTo</code><span> 为数组类型时 (如: </span><code>string-array</code><span>)：当 </span><code>arity=1</code><span> 时，输入的字段将按照 </span><code>,</code><span> 进行切割 (例: </span><code>--model lr,lasso,svm</code><span> 识别为 </span><code>String[]{&quot;lr&quot;, &quot;lasso&quot;, &quot;svm&quot;})</code><span>；</span><code>arity</code><span> 为 </span><code>≥1</code><span> 或 </span><code>2,3,...</code><span> 时，传入的值直接作为数组元素，而不进行分隔 (例: </span><code>--model lr lasso,svm 识别为 String[]{&quot;lr&quot;, &quot;lasso,svm&quot;}</code><span>)</span><br><span>4. </span><code>passedIn</code><span> 类型参数长度必须为 0；</span><code>boolean</code><span>, </span><code>short</code><span>, </span><code>integer</code><span>, </span><code>long</code><span>, </span><code>string</code><span>, </span><code>float</code><span>, </span><code>double</code><span> 类型参数长度必须为 1; </span><code>&lt;start&gt;-&lt;end&gt;</code><span>,</span><code>&lt;index&gt;:&lt;start&gt;-&lt;end&gt;</code><span>,</span><code>k1=v1;k2=v2;...</code><span>类型参数长度必须为 1；</span><code>array</code><span> 类型参数长度不能为 0</span><br></details></td></tr><tr><td><span>group</span></td><td><details><summary><span>参数组</span></summary><span>文档提示：设置参数所在的参数组</span></details></td></tr><tr><td><span>description</span></td><td><details><summary><span>描述文档</span></summary><span>文档提示：设置参数的描述文档</span></details></td></tr><tr><td><span>format</span></td><td><details><summary><span>参数输入的参考格式</span></summary><span>文档提示：设置参数的参考输入格式</span></details></td></tr><tr><td><span>hidden</span></td><td><details><summary><span>在文档中隐藏该参数</span></summary><span>被隐藏的参数可以使用，但是不会在文档中显示</span></details></td></tr><tr><td><span>help</span></td><td><details><summary><span>该参数是否识别为帮助指令</span></summary><span>用户传入帮助指令时，允许输入错误的参数，并且不会对参数的规则进行检验</span></details></td></tr><tr><td><span>debug</span></td><td><details><summary><span>是否为 debug 模式下可用的参数</span></summary><span>在非 debug 模式下无法使用勾选了该项的参数，该属性建议用于标记一些未完成开发或内部测试的参数</span></details></td></tr></tbody></table></figure><h3 id='4-配置参数规则-other-option-面板'><span>4. 配置参数规则 (Other Option 面板)</span></h3><p><span>参数之间若存在搭配规则，建议在 Other Option 面板中进行配置。目前 commandParser 支持 5 种类型的参数规则：</span></p><figure><table><thead><tr><th><span>规则</span></th><th><span>含义</span></th><th><span>表达式 ( </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.026ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 2663.5 860" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(536,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(1107.7,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(2163.5,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_i=1</script><span> 表示传入了该参数)</span></th></tr></thead><tbody><tr><td><span>AT_MOST_ONE</span></td><td><span>command1 和 command2 至多传入一个</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.165ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 4935.1 860" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-2-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-2-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-2-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-2-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-2-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-2-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1161.8,0)"><use data-c="2B" xlink:href="#MJX-2-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2162,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-2-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3379.3,0)"><use data-c="2264" xlink:href="#MJX-2-TEX-N-2264"></use></g><g data-mml-node="mn" transform="translate(4435.1,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>1</mn></msub><mo>+</mo><msub><mi>p</mi><mn>2</mn></msub><mo>≤</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_1+p_2\le1</script></td></tr><tr><td><span>AT_LEAST_ONE</span></td><td><span>command1 和 command2 至少传入一个</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.165ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 4935.1 860" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-3-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-3-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-3-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-3-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-3-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-3-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1161.8,0)"><use data-c="2B" xlink:href="#MJX-3-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2162,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-3-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-3-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3379.3,0)"><use data-c="2265" xlink:href="#MJX-3-TEX-N-2265"></use></g><g data-mml-node="mn" transform="translate(4435.1,0)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>1</mn></msub><mo>+</mo><msub><mi>p</mi><mn>2</mn></msub><mo>≥</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_1+p_2\ge1</script></td></tr><tr><td><span>REQUEST_ONE</span></td><td><span>command1 和 command2 需要有其中的一个</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.165ex" height="1.946ex" role="img" focusable="false" viewBox="0 -666 4935.1 860" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-4-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-4-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-4-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1161.8,0)"><use data-c="2B" xlink:href="#MJX-4-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2162,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-4-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3379.3,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(4435.1,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>1</mn></msub><mo>+</mo><msub><mi>p</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_1+p_2=1</script></td></tr><tr><td><span>PRECONDITION</span></td><td><span>传入了 command1 才能传入 command2 </span><br><span>即: command1 是 command2 的前置条件</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="7.268ex" height="1.878ex" role="img" focusable="false" viewBox="0 -636 3212.7 830" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-5-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-5-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1217.3,0)"><use data-c="2265" xlink:href="#MJX-5-TEX-N-2265"></use></g><g data-mml-node="msub" transform="translate(2273.1,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-5-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-5-TEX-N-32"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>1</mn></msub><mo>≥</mo><msub><mi>p</mi><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_1\ge p_2</script></td></tr><tr><td><span>SYMBIOSIS</span></td><td><span>command1 和 command2 同时传入或同时不传入</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.165ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 4935.1 931" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.486ex;"><defs><path id="MJX-6-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-6-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-6-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-6-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-6-TEX-N-2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-6-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1161.8,0)"><use data-c="2B" xlink:href="#MJX-6-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(2162,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-6-TEX-I-1D45D"></use></g><g data-mml-node="mn" transform="translate(536,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-6-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3379.3,0)"><use data-c="2260" xlink:href="#MJX-6-TEX-N-2260"></use></g><g data-mml-node="mn" transform="translate(4435.1,0)"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mn>1</mn></msub><mo>+</mo><msub><mi>p</mi><mn>2</mn></msub><mo>≠</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">p_1+p_2\ne1</script></td></tr></tbody></table></figure><details><summary><b>案例1</b> 程序的输出格式可以为 <code>--o-bgz</code>(使用 bgzip 压缩输出的数据) 或 <code>--o-text</code> (纯文本输出), 两者不能同时使用</summary>指令设计如下: <br><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv15bisrjj31jk0e8n0h.jpg" alt="案例1-1" style="zoom:100%;"> <br><br>规则设计如下: <br><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxuujgz73jj31jk08l3zg.jpg" alt="案例1-2" style="zoom:100%;"> <br> 仅当输出格式为 <code>--o-bgz</code> 时才能指定并行压缩的线程数 (-t) 和压缩级别 (-l)；<code>--o-bgz</code> 和 <code>--o-text</code> 必须指定其中的一个<br><br> 文档预览: <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv19106huj31jk0i0wgy.jpg" alt="案例1-3" style="zoom:100%;"></details><h3 id='5-配置全局规则-other-option-面板'><span>5. 配置全局规则 (Other Option 面板)</span></h3><p><span>命令解析器有 5 项全局参数，位于 </span><code>Other Option</code><span> 面板下部，每一项的含义为：</span></p><ul><li><p><span>Usage: 如 “案例1” 所示，此窗口的内容对应于文档中的第一句程序用法</span></p></li><li><p><span>offset: 跳过输入的参数个数（例如: </span><code>bgzip compress &lt;input&gt; -t 5 -l 5</code><span> 而 </span><code>offset=3</code><span> 时，将跳过 3 个参数，从 </span><code>-t 5 -l 5</code><span> 开始解析）</span></p></li><li><p><span>Global Rule: 全局规则，支持三种参数类型 （</span><code>.</code><span> 代表不设置规则）</span></p><ul><li><span>AT_MOST_ONE: 所有参数至多输入 1 个</span></li><li><span>AT_LEAST_ONE: 所有参数至少输入 1 个</span></li><li><span>REQUEST_ONE: 需要输入 1 个参数</span></li></ul></li><li><p><span>Debug Mode: 解析器是否为 Debug 模式。建议开发人员在 </span><code>Debug 模式</code><span> 下进行工具开发，对外发布时再使用 </span><code>非 Debug 模式</code><span>的命令行文件（或 Java 脚本中使用 </span><code>parser.debug(boolean debug)</code><span> 控制模式）</span></p><ul><li><span>非 Debug 模式 (用户模式): 包含 </span><code>debug</code><span> 项的参数将不可使用，并且不会在文档中显示</span></li><li><span>Debug 模式 (开发人员模式): 包含 </span><code>debug</code><span> 项的参数可以使用，并且会在文档中显示</span></li></ul></li><li><p><span>@ Syntax: 将 </span><code>@</code><span> 开头的符号识别为取地址符，该地址对应的文件内容作为参数进行传入</span></p></li></ul><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gy1rjn2jnxj31je03gdg6.jpg" referrerpolicy="no-referrer" alt="图2"></p><h3 id='6-搜索指令'><span>6. 搜索指令</span></h3><p><span>窗口左下角可以进行参数搜索，支持两种规则的查找方式：</span></p><ul><li><p><code>string</code><span>: 从 </span><code>commandName</code><span>, </span><code>default</code><span>, </span><code>convertTo</code><span>, </span><code>validateWith</code><span>, </span><code>group</code><span>, </span><code>description</code><span>, </span><code>format</code><span> 中查找包含 (区分大小写) 指定内容的参数项目</span></p></li><li><p><code>key:value</code><span>: 查找 </span><code>key</code><span> 列 （不区分大小写）值包含 </span><code>value</code><span> 的参数项目</span></p><ul><li><code>request</code><span>, </span><code>hidden</code><span>, </span><code>help</code><span>, </span><code>debug</code><span> 列的可选值为 true 或 false</span></li></ul></li></ul><p><span>搜索状态下只能修改参数的属性，而不允许新增、删除、移动参数，需要手动清空搜索框后才能恢复编辑状态。</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv1rz679pj31e00u0gpq.jpg" referrerpolicy="no-referrer" alt="图3"></p><h3 id='7-预览文档-preview-面板'><span>7. 预览文档 (Preview 面板)</span></h3><p><span>点击 </span><code>Preview</code><span> 生成当前参数对应的指令文档，在 Java 脚本中使用 </span><code>parser.toString()</code><span> 获取文档</span></p><blockquote><p><span>通常会使用 options.isPassedIn(&quot;-h&quot;) 判断是否传入了 help 指令，如果传入了，则使用 parser.toString() 打印文档，否则进行业务</span></p></blockquote><h3 id='8-测试指令-parser-testing-面板'><span>8. 测试指令 (Parser Testing 面板)</span></h3><p><span>点击 </span><code>Parser Testing</code><span> 进行指令解析测试，上半部分输入窗口可以通过拖拽文件进行输入，也可以手动输入。完成输入后点击 </span><code>Parse</code><span> 进行解析测试，随后下半部分窗口可以观察到哪些指令被输入，以及参数的捕获值。</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv2742pthj31e00u0wi3.jpg" referrerpolicy="no-referrer" alt="图4"></p><h3 id='9-导出指令文件'><span>9. 导出指令文件</span></h3><p><span>点击 </span><code>Save</code><span> 按钮保存当前指令文件，CommandParser 中支持两种导出格式：Java 脚本文件和 Command 命令文件。</span></p><p><span>Command 命令文件的格式见 </span><a href='#command-文件格式'><span>本节</span></a><span>，Java 脚本文件则是指令转为</span><a href='#开发文档'><span>使用 Java 语言创建 Parser 的格式</span></a><span>。两种文件的区别如下：</span></p><ul><li><span>Java 脚本文件无法直接拖拽进入 CommandParser 图形窗口进行编辑，但可以通过调用 </span><code>MyParser.toFile(String fileName)</code><span> 转为 Command 命令文件，再拽拖进入 CommandParser 图形窗口进行编辑</span></li><li><span>Command 命令文件通过拖拽进入 CommandParser 图形窗口，再选择导出为 Java 脚本文件</span></li></ul><blockquote><details><summary>Java 脚本文件示例</summary>指令设计如下: <br><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxyoldyxomj30ve0u00xb.jpg" alt="案例1-1" style="zoom:100%;"><br>MyParser 是一个单例，通过 `MyParser.getParser()` 获得 CommandParser 对象。</details></blockquote><h3 id='10-在-java-脚本中使用当前指令文件'><span>10. 在 Java 脚本中使用当前指令文件</span></h3><p><span>指令的解析与使用分四步进行：用户传入指令 </span><code>args</code><span> </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-9-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-9-TEX-N-2192"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo accent="false" stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">\to</script><span> 创建解析器 </span><code>parser</code><span> </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-9-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-9-TEX-N-2192"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo accent="false" stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">\to</script><span> 使用解析器解析用户指令，并得到参数集 </span><code>matcher</code><span> </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-9-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-9-TEX-N-2192"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo accent="false" stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">\to</script><span> 从参数集中获取参数信息。</span></p><p><span>CommandParser 支持两种格式的文件导出，两种方式的区别仅在加载解析器部分，我们分别介绍两种格式文件的使用方法。</span></p><h4 id='101-使用-command-命令文件'><span>10.1 使用 Command 命令文件</span></h4><blockquote><p><span>示例文件: </span><code>src/dev/fromcommandfile</code></p></blockquote><p><strong><span>Step1:</span></strong><span> 从指令文件中创建解析器</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 从外部文件中导入指令文件 (支持相对路径、绝对路径)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-variable">CommandParser</span>.<span class="cm-variable">loadFromFile</span>(<span class="cm-string">"./commandList.cp"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 从内部资源导入指令文件，Test.class 请修改为调用该指令的 类名.class (当前项目路径为根目录 /，使用“相对于项目路径的绝对路径”)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-variable">CommandParser</span>.<span class="cm-variable">loadFromInnerResource</span>(<span class="cm-variable">Test</span>.<span class="cm-keyword">class</span>, <span class="cm-string">"/commandList.cp"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 175px;"></div><div class="CodeMirror-gutters" style="display: none; height: 175px;"></div></div></div></pre><p><span>若 Java 程序最后应该导出为 jar 包或其他封装程序使用，我们建议使用 </span><code>CommandParser.loadFromInnerResource</code><span> 导入指令文件。</span></p><p><strong><span>Step2:</span></strong><span> 解析用户输入的参数</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandMatcher</span> <span class="cm-variable">options</span> <span class="cm-operator">=</span> <span class="cm-variable">parser</span>.<span class="cm-variable">parse</span>(<span class="cm-variable">args</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><p><strong><span>Step3:</span></strong><span> 通过参数名获取解析结果</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 判断用户是否传入了指定的参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">boolean</span> <span class="cm-variable">noqc</span> <span class="cm-operator">=</span> <span class="cm-variable">options</span>.<span class="cm-variable">isPassedIn</span>(<span class="cm-string">"--no-qc"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 获取参数 --thread,-t 对应的值 (若用户没有传入该参数，则获得默认值)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">threadNum</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">int</span>) <span class="cm-variable">options</span>.<span class="cm-variable">get</span>(<span class="cm-string">"-t"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 125px;"></div><div class="CodeMirror-gutters" style="display: none; height: 125px;"></div></div></div></pre><p><span>其他常用方法：</span></p><ul><li><span>获取指令文档：</span><code>parser.toString()</code></li><li><span>获取该指令解析器中是否包含某参数：</span><code>parser.containCommandItem($commandName)</code></li><li><span>修改为开发人员/用户模式：</span><code>parser.debug(true)</code><span> 或 </span><code>parser.debug(false)</code></li><li><span>获取解析器的捕获情况：</span><code>options.toString()</code></li><li><span>导出当前解析器为指令文件：</span><code>parser.toFile($fileName)</code></li></ul><h4 id='102-使用-java-脚本文件'><span>10.2 使用 Java 脚本文件</span></h4><blockquote><p><span>示例文件: </span><code>src/dev/fromjavascript</code></p></blockquote><p><strong><span>Step1:</span></strong><span> 获取解析器 (MyParser 是导出的 Java 文件的类名)</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-variable">MyParser</span>.<span class="cm-variable">getParser</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><p><strong><span>Step2:</span></strong><span> 解析用户输入的参数</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandMatcher</span> <span class="cm-variable">options</span> <span class="cm-operator">=</span> <span class="cm-variable">parser</span>.<span class="cm-variable">parse</span>(<span class="cm-variable">args</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 或直接通过 MyParser 进行访问</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandMatcher</span> <span class="cm-variable">options</span> <span class="cm-operator">=</span> <span class="cm-variable">MyParser</span>.<span class="cm-variable">parse</span>(<span class="cm-variable">args</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre><p><strong><span>Step3:</span></strong><span> 通过参数名获取解析结果</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 判断用户是否传入了指定的参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">boolean</span> <span class="cm-variable">noqc</span> <span class="cm-operator">=</span> <span class="cm-variable">options</span>.<span class="cm-variable">isPassedIn</span>(<span class="cm-string">"--no-qc"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 获取参数 --thread,-t 对应的值 (若用户没有传入该参数，则获得默认值)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">threadNum</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">int</span>) <span class="cm-variable">options</span>.<span class="cm-variable">get</span>(<span class="cm-string">"-t"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 125px;"></div><div class="CodeMirror-gutters" style="display: none; height: 125px;"></div></div></div></pre><p><span>其他常用方法：</span></p><ul><li><span>获取指令文档：</span><code>parser.toString()</code></li><li><span>获取该指令解析器中是否包含某参数：</span><code>parser.containCommandItem($commandName)</code></li><li><span>修改为开发人员/用户模式：</span><code>parser.debug(true)</code><span> 或 </span><code>parser.debug(false)</code></li><li><span>获取解析器的捕获情况：</span><code>options.toString()</code></li><li><span>导出当前解析器为指令文件：</span><code>parser.toFile($fileName)</code><span> 或 </span><code>MyParser.toFile($fileName)</code><span> </span></li></ul><h3 id='11-打包项目为-jar-包--------以-idea-为例'><span>11. 打包项目为 jar 包 —— 以 IDEA 为例</span></h3><p><strong><span>Step1:</span></strong><span> 在 IDEA 中点击 File &gt; Project Structure 打开窗口</span></p><p><strong><span>Step2:</span></strong><span> 在 Modules 中将包含参数文件的父目录设置为 Resources (也可以将文件放在 src 目录下)</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv6tg7t1dj310l0u076i.jpg" referrerpolicy="no-referrer" alt="图"></p><p><strong><span>Step3:</span></strong><span> 点击 Artifacts &gt; + &gt; JAR &gt; From modules with dependencies...</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv6viqfp9j312w0kg41e.jpg" referrerpolicy="no-referrer" alt="图"></p><p><strong><span>Step4:</span></strong><span> 设置入口函数 (包含 public static void main(String[] args) 方法的类)</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv6wbklz4j30s20hujt7.jpg" referrerpolicy="no-referrer" alt="图"></p><blockquote><p><span>建议将 Output directory 修改为项目根目录，这样编译后的 jar 包就在项目根目录</span></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxv6z78aiqj31he0i6dig.jpg" referrerpolicy="no-referrer" alt="图"></p></blockquote><p><strong><span>Step5:</span></strong><span> 关闭 Project Structure 窗口，点击 Build &gt; Build Artifacts &gt; Build (或 Rebuild) 编译 jar 包</span></p><h2 id='command-文件格式'><span>Command 文件格式</span></h2><p><span>Command 文件是 CommandParser 用于储存命令信息的格式，以 </span><code>cp</code><span> 作为扩展名。Command 文件包含注释信息行、标题行、数据行。其中：</span></p><ul><li><span>注释信息行的行首为“##”，内容是键值对的形式，通常包含 Command 文件版本信息、运行模式、程序名、指令偏移量、全局规则、指令规则等</span></li><li><span>标题行的行首为“#”，包含 11 个顺序固定的字段，分别为 commandName (指令名)，request (是否为必备参数)，default (默认值, 该值默认为字符串格式, 并按照 convertTo 进行格式转换), convertTo (指令值的格式, 内置 21 种常见格式，详见</span><a href='#设置指令的参数'><span>开发文档</span></a><span>), validateWith (验证器, 内置 4 种常见格式), arity (参数长度), group (参数组), description (描述信息), format (指令使用格式), hidden (是否在 -h 帮助文档中隐藏该参数), help (是否捕获为帮助指令)</span></li><li><span>之后的数据行中每一个指令占用一行，指令的参数按照标题行顺序进行填写，使用制表符分割数据，缺失信息使用“.”占位</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">##commandParserV1.0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">##programName=&lt;value="bgzip &lt;input&gt;";description="when '-h' were passed in, would be show 'Usage: $value [options]'"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">##debugMode=false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">##offset=&lt;value=1;description="skip the $value arguments before the command argument passed in"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">##globalRule=&lt;value="REQUEST_ONE";description="one of the following rules is supported: {'.','AT_MOST_ONE','AT_LEAST_ONE','REQUEST_ONE'}"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">#commandName<span class="cm-tab" role="presentation" cm-text="	">  </span>request<span class="cm-tab" role="presentation" cm-text="	"> </span>default<span class="cm-tab" role="presentation" cm-text="	"> </span>convertTo<span class="cm-tab" role="presentation" cm-text="	"> </span>validateWith<span class="cm-tab" role="presentation" cm-text="	">  </span>arity<span class="cm-tab" role="presentation" cm-text="	"> </span>group<span class="cm-tab" role="presentation" cm-text="	"> </span>description<span class="cm-tab" role="presentation" cm-text="	"> </span>format<span class="cm-tab" role="presentation" cm-text="	">  </span>hidden<span class="cm-tab" role="presentation" cm-text="	">  </span>help<span class="cm-tab" role="presentation" cm-text="	">  </span>debug</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">--help</span>,-help,-h<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>passedIn<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-number">0</span><span class="cm-tab" role="presentation" cm-text="	"> </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">true</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">true</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">compress<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Compression using parallel-bgzip (supported by CLM algorithm).<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">'compress &lt;file&gt;'</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">convert<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Convert *.gz format to *.bgz format.<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">'convert &lt;file&gt;'</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">decompress<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Decompression.<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">'decompress &lt;file&gt;'</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">extract<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Cut the bgzip file by pointer range (decompressed file).<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">'extract &lt;file&gt; -r &lt;start&gt;-&lt;end&gt;'</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">concat<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Concatenate multiple files.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-string">'concat &lt;file&gt;,&lt;file&gt;,...'</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">md5<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span>string-array<span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-attribute">-1</span><span class="cm-tab" role="presentation" cm-text="	">  </span>Options<span class="cm-tab" role="presentation" cm-text="	"> </span>Calculate a message-digest fingerprint (checksum) <span class="cm-keyword">for</span> decompressed file.<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string">'md5 &lt;file&gt;'</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-atom">false</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 600px;"></div><div class="CodeMirror-gutters" style="display: none; height: 600px;"></div></div></div></pre><p><span>尽管从原理上可以直接修改 command 文件，以更改参数/文件属性，但我们建议使用 commandParser 图形界面进行（我们内置了一些检查规则，可以规避错误的格式输入）。</span></p><h2 id='开发文档'><span>开发文档</span></h2><p><span>我们建议有高级开发需求的用户阅读开发文档（如自定义转换器、验证器，追求纯脚本开发，而不希望通过外部资源导入的方式进行）。</span></p><h3 id='创建解析器'><span>创建解析器</span></h3><p><span>解析器可以使用脚本进行注册，也可以从文件中导入。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 使用脚本创建解析器</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">CommandParser</span>(<span class="cm-string">"bgzip &lt;input&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 从文件中导入解析器 (不建议使用该语句)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-variable">CommandParser</span>.<span class="cm-variable">loadFromFile</span>(<span class="cm-string">"/command/bgzip.cp"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 从文件中导入解析器 (建议使用该语句)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandParser</span> <span class="cm-variable">parser</span> <span class="cm-operator">=</span> <span class="cm-variable">CommandParser</span>.<span class="cm-variable">loadFromInnerResource</span>(<span class="cm-variable">BGZIPParserFromFile</span>.<span class="cm-keyword">class</span>, <span class="cm-string">"/command/bgzip.cp"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 250px;"></div><div class="CodeMirror-gutters" style="display: none; height: 250px;"></div></div></div></pre><p><span>CommandParser 包含三个注册器:</span></p><ul><li><span>CommandParser(String programName): 创建解析器，并设置程序名为 programName，添加参数名为 </span><code>--help, -help, -h</code><span> 的帮助指令</span></li><li><span>CommandParser(boolean help): 创建解析器，并设置程序名为 </span><code>&lt;main class&gt;</code><span>，根据 </span><code>help</code><span> 决定是否往解析器中添加默认的帮助指令</span></li><li><span>CommandParser(boolean help, String programName): 创建解析器，并设置程序名为 programName。根据 </span><code>help</code><span> 决定是否往解析器中添加默认的帮助指令</span></li></ul><h3 id='设置解析器的全局参数'><span>设置解析器的全局参数</span></h3><ul><li><span>parser.setProgramName(String programName): 设置程序名</span></li><li><span>parser.offset(int length): 设置偏移量 (偏移量指对于用户传入的指令 </span><code>args</code><span>，将忽略前面的 length 个参数)</span></li><li><span>parser.registerGlobalRule(CommandRuleType ruleType): 设置全局规则。全局规则接受一个 CommandRuleType 参数 (这是一个枚举类)，支持 AT_MOST_ONE (至多包含 1 个参数)、AT_LEAST_ONE (至少包含 1 个参数)、REQUEST_ONE (恰好 1 个参数)</span></li><li><span>parser.debug(boolean enable): 是否为 debug 模式</span></li><li><span>parser.ustingAt(boolean enable): 是否将 </span><code>@</code><span> 转译为取地址符 (地址对应的文件内容作为参数传入)</span></li></ul><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwpc7o2zdsj30lx0dw40k.jpg" alt="image-20211123155539971" style="zoom: 67%;" /></p><h3 id='向解析器中注册指令'><span>向解析器中注册指令</span></h3><p><span>初始情况下解析器中不包含任何指令，通过 parser.register(String... commandNames) 进行指令注册，该指令的返回类型是 CommanItem，即以 commandNames 作为指令名的指令项目。</span></p><blockquote><p><span>commandName 的格式要求: 阿拉伯数字 </span><code>0-9</code><span>、大小写字母 </span><code>a-zA-z</code><span>、部分特殊字符 </span><code>+-_</code><span> ，并且该参数名不能与该解析器中已经注册的任何参数重复</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注册参数名为 --threads, -t 的指令项目</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommandItem</span> <span class="cm-variable">threadItem</span> <span class="cm-operator">=</span> <span class="cm-variable">parser</span>.<span class="cm-variable">register</span>(<span class="cm-string">"--threads"</span>, <span class="cm-string">"-t"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 50px;"></div><div class="CodeMirror-gutters" style="display: none; height: 50px;"></div></div></div></pre><h3 id='设置指令的参数'><span>设置指令的参数</span></h3><p><span>CommandItem 具有参数:</span></p><ul><li><p><span>item.convertTo(IConverter</span><T><span> converter): 将指令的捕获值转为指定的格式</span></p></li><li><p><span>item.validateWith(IValidator... validators): 验证该指令的捕获值，</span></p><ul><li><span>item.validateWith(int MIN, int MAX): 创建一个整数范围验证器，参数值必须在 [MIN, MAX] 内</span></li><li><span>item.validateWith(double MIN, double MAX): 创建一个浮点数范围验证器，参数值必须在 [MIN, MAX] 内</span></li></ul></li><li><p><span>item.arity(int length): 设置参数长度，-1 表示至少 1 个参数</span></p></li><li><p><span>item.defaultTo(Object defaultValue): 设置该指令的默认值，若未设置转换器，则自动设置为与 默认值 一致的转换器 (如: defaultTo(new String[]{}), 则转换器自动设置为 StringArrayConverter)</span></p></li><li><p><span>item.addOptions(CommandOptions... options): 追加指令的权限参数，可选 REQUEST (必备参数)、HIDDEN (隐藏参数)、HELP (帮助参数)、DEBUG (debug 模式参数)</span></p><ul><li><span>item.setOptions(CommandOptions... options): 设置指令的权限参数，可选 REQUEST (必备参数)、HIDDEN (隐藏参数)、HELP (帮助参数)、DEBUG (debug 模式参数)，该方法会覆盖现有的权限参数信息</span></li></ul></li><li><p><span>item.setOptionGroup(String optionGroup): 设置该指令的参数组名 (默认情况下由 Parser 指令)</span></p></li><li><p><span>item.setDescription(String description): 设置该指令的描述文档</span></p></li><li><p><span>item.setDescription(String description, String format): 设置该指令的描述文档、格式</span></p></li><li><p><span>item.setFormat(String format): 设置该指令的格式</span></p></li></ul><p><span>每一个方法的返回值都是 CommandItem 本身，因此支持链式调用：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注册指令，并配置其参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">parser</span>.<span class="cm-variable">register</span>(<span class="cm-string">"--threads"</span>, <span class="cm-string">"-t"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-variable">defaultTo</span>(<span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-variable">validateWith</span>(<span class="cm-number">1</span>, <span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span>.<span class="cm-variable">setDescription</span>(<span class="cm-string">"Set the number of threads for bgzip compression."</span>, <span class="cm-string">"'-t &lt;int&gt;' ("</span> <span class="cm-operator">+</span> <span class="cm-number">1</span> <span class="cm-operator">+</span> <span class="cm-string">"~"</span> <span class="cm-operator">+</span> <span class="cm-number">10</span> <span class="cm-operator">+</span> <span class="cm-string">")"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 150px;"></div><div class="CodeMirror-gutters" style="display: none; height: 150px;"></div></div></div></pre><p><span>CommandParser 内置的 21 种转换器如下：</span></p><figure><table><thead><tr><th><span>转换器类型</span></th><th><span>默认参数长度</span></th><th><span>输入格式示例</span></th><th><span>转换格式</span></th></tr></thead><tbody><tr><td><span>passedIn</span></td><td><span>0</span></td><td>&nbsp;</td><td><span>(该指令无转换值，而是通过 matcher.isPassedIn 判断是否传入)</span></td></tr><tr><td><span>boolean</span></td><td><span>1</span></td><td><span>true</span></td><td><span>true</span></td></tr><tr><td><span>short</span></td><td><span>1</span></td><td><span>10086</span></td><td><span>10086</span></td></tr><tr><td><span>integer</span></td><td><span>1</span></td><td><span>20119823</span></td><td><span>20119823</span></td></tr><tr><td><span>long</span></td><td><span>1</span></td><td><span>20119823</span></td><td><span>20119823</span></td></tr><tr><td><span>float</span></td><td><span>1</span></td><td><span>1.0</span></td><td><span>1.0</span></td></tr><tr><td><span>double</span></td><td><span>1</span></td><td><span>1.0</span></td><td><span>1.0</span></td></tr><tr><td><span>string</span></td><td><span>1</span></td><td><span>sysu</span></td><td><span>&quot;sysu&quot;</span></td></tr><tr><td><span>short-array</span></td><td><span>-1</span></td><td><span>1 2 3 4 5</span></td><td><span>short[]{1, 2, 3, 4 ,5}</span></td></tr><tr><td><span>integer-array</span></td><td><span>-1</span></td><td><span>1 2 3 4 5</span></td><td><span>int[]{1, 2, 3, 4 ,5}</span></td></tr><tr><td><span>long-array</span></td><td><span>-1</span></td><td><span>1 2 3 4 5</span></td><td><span>long[]{1, 2, 3, 4 ,5}</span></td></tr><tr><td><span>float-array</span></td><td><span>-1</span></td><td><span>0.1 0.2 0.4 0.8 1.0</span></td><td><span>float[]{0.1, 0.2, 0.4, 0.8, 1.0}</span></td></tr><tr><td><span>double-array</span></td><td><span>-1</span></td><td><span>0.1 0.2 0.4 0.8 1.0</span></td><td><span>double[]{0.1, 0.2, 0.4, 0.8, 1.0}</span></td></tr><tr><td><span>string-array</span></td><td><span>-1</span></td><td><span>sysu pku thu</span></td><td><span>String[]{&quot;sysu&quot;, &quot;pku&quot;, &quot;thu&quot;}</span></td></tr><tr><td><span>&lt;start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (integer)</span></td><td><span>1</span></td><td><span>10177-20119823</span></td><td><span>int[]{10177, 20119823}</span></td></tr><tr><td><span>&lt;start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (long)</span></td><td><span>1</span></td><td><span>10177-20119823</span></td><td><span>long[]{10177, 20119823}</span></td></tr><tr><td><span>&lt;start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (double)</span></td><td><span>1</span></td><td><span>0.2-0.8</span></td><td><span>double[]{0.2, 0.8}</span></td></tr><tr><td><span>&lt;</span><span>index</span><span>&gt;</span><span>:</span><span>&lt;</span><span>start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (integer)</span></td><td><span>1</span></td><td><span>22:290000-1000000</span></td><td><span>int[]{22, 290000, 1000000}</span></td></tr><tr><td><span>&lt;start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (string)</span></td><td><span>1</span></td><td><span>290000-1000000</span></td><td><span>String[]{&quot;290000&quot;, &quot;1000000&quot;}</span></td></tr><tr><td><span>&lt;</span><span>index</span><span>&gt;</span><span>:</span><span>&lt;</span><span>start</span><span>&gt;</span><span>-</span><span>&lt;</span><span>end</span><span>&gt;</span><span> (string)</span></td><td><span>1</span></td><td><span>22:290000-1000000</span></td><td><span>String[]{&quot;22&quot;, &quot;290000&quot;, &quot;1000000&quot;}</span></td></tr><tr><td><span>k1=v1;k2=v2;...</span></td><td><span>1</span></td><td><span>chrom=1;ALT=A;REF=T</span></td><td><span>HashMap{&quot;chrom&quot;:&quot;1&quot;, &quot;ALT&quot;:&quot;A&quot;, &quot;REF&quot;:&quot;T&quot;}</span></td></tr></tbody></table></figure><p><span>CommandParser 内置的 4 种验证器如下：</span></p><figure><table><thead><tr><th><span>验证器</span></th><th><span>描述</span></th></tr></thead><tbody><tr><td><span>EnsureFileExistsValidator.INSTANCE</span></td><td><span>确保文件存在 (不存在时报错)</span></td></tr><tr><td><span>EnsureFileIsNotDirectoryValidator.INSTANCE</span></td><td><span>确保文件不是文件夹 (为文件夹时报错)</span></td></tr><tr><td><span>new RangeValidator(MIN, MAX)</span></td><td><span>传入值的范围不在 [MIN, MAX] 之间时报错 (MIN, MAX 实现了 float, double, short, integer, long 类型)</span></td></tr><tr><td><span>new ElementValidator(String... keys)</span></td><td><span>传入值的必须在指定的 keys 中。该验证器具有方法 setAllowIndex(boolean enable) 和 setIgnoreCase(boolean enable)，分别表示是否支持索引验证及无视大小写</span></td></tr></tbody></table></figure><h3 id='设置指令间的规则'><span>设置指令间的规则</span></h3><p><span>多个 CommandItem 之间可以通过以下指令设置彼此间的规则：</span></p><ul><li><span>parser.registerRule(String item1, String item2, CommandRuleType ruleType)</span></li><li><span>parser.registerRule(String item1, String[] items, CommandRuleType ruleType)</span></li><li><span>parser.registerRule(String[] items1, String[] items2, CommandRuleType ruleType)</span></li></ul><p><span>指令项目必须先进行注册，才能添加指令规则。指令规则 CommandRuleType 支持的类型 </span><a href='#4-配置参数规则-other-option-面板'><span>详见此处</span></a></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.25px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注册指令 --no-qc 与其他质控参数的规则，含义为：指令了 --no-qc (不质控) 时，禁止用户传入其他质控参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">parser</span>.<span class="cm-variable">registerRule</span>(<span class="cm-string">"--no-qc"</span>, <span class="cm-keyword">new</span> <span class="cm-variable-3">String</span>[]{<span class="cm-string">"--gty-gq"</span>, <span class="cm-string">"--gty-dp"</span>, <span class="cm-string">"--seq-qual"</span>, <span class="cm-string">"--seq-dp"</span>, <span class="cm-string">"--seq-mq"</span>, <span class="cm-string">"--seq-ac"</span>, <span class="cm-string">"--seq-af"</span>, <span class="cm-string">"--seq-an"</span>, <span class="cm-string">"--max-allele"</span>}, <span class="cm-variable">CommandRuleType</span>.<span class="cm-variable">AT_MOST_ONE</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 125px;"></div><div class="CodeMirror-gutters" style="display: none; height: 125px;"></div></div></div></pre><h3 id='导出解析器'><span>导出解析器</span></h3><p><span>创建完成的解析器可以导出 command 文件，以便于后续修改、复用：</span></p><ul><li><span>parser.toFile(String fileName)</span></li></ul><h3 id='使用解析器解析指令'><span>使用解析器解析指令</span></h3><p><span>创建完成的解析器使用以下方法之一</span></p><ul><li><code>parser.parse(args)</code><span> </span></li><li><code>parser.parseFromString(strings)</code><span> </span></li><li><code>parser.parseFromFile(fileName)</code><span> </span></li></ul><p><span>解析指令，并获得 </span><code>CommandMatcher</code><span> 对象。CommandMatcher 对象主要包含 2 个方法：</span></p><ul><li><span>matcher.isPassedIn(String commandKey): 是否传入 commandKey 参数</span></li><li><span>matcher.get(String commandKey): 获取 commandKey 对应的参数值，未传入时将获得参数的 defaultValue (默认为 null)</span></li></ul><p><span>此外，使用 matcher.toString() 可以获得输入参数的格式化文本。</span></p><h3 id='高级语法-自定义转换器与验证器'><span>高级语法: 自定义转换器与验证器</span></h3><p><span>有时候一个指令往往需要对应多种用法，此时默认的 21 种参数转换器便不再适用。commandParser 可以通过自定义转换器与验证器，实现复杂的参数转换与验证。</span></p><p><span>实现该功能需要指定的方法实现相应的接口 (IConverter 与 IValidator)。对于自定义的转换器，在图形界面和指令文件中都将以 </span><code>built-in</code><span> 形式存在，导入到 java 中时将创建 </span><code>AbstractConvertor</code><span> 和  </span><code>AbstractValidator</code><span> 占位，用户需要使用：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">parser.getCommandItem("$commandName").convertTo($convertor)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">parser.getCommandItem("$commandName").validateWith($convertor)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 50px;"></div><div class="CodeMirror-gutters" style="display: none; height: 50px;"></div></div></div></pre><p><span>重新链接自定义的方法。</span></p><p><span>例如：实现一个名为 </span><code>--model</code><span> 的指令，它的转换格式为 ILDModel 类型。输入的 </span><code>geno, --geno, --geno-ld, --geno-r2</code><span> 将被识别为 </span><code>ILDModel.GENOTYPE_LD</code><span>，而输入的 </span><code>hap, --hap, --hap-ld, --hap-r2</code><span> 将被识别为 </span><code>ILDModel.HAPLOTYPE_LD</code><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">parser</span>.<span class="cm-variable">register</span>(<span class="cm-string">"--model"</span>, <span class="cm-string">"-m"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">arity</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">convertTo</span>((<span class="cm-variable">IConverter</span><span class="cm-operator">&lt;</span><span class="cm-variable">ILDModel</span><span class="cm-operator">&gt;</span>) <span class="cm-variable">params</span> <span class="cm-operator">-&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Assert</span>.<span class="cm-variable">that</span>(<span class="cm-variable">params</span>.<span class="cm-variable">length</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ElementValidator</span> <span class="cm-variable">validator</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ElementValidator</span>(<span class="cm-string">"geno"</span>, <span class="cm-string">"--geno"</span>, <span class="cm-string">"--geno-ld"</span>, <span class="cm-string">"--geno-r2"</span>, <span class="cm-string">"hap"</span>, <span class="cm-string">"--hap"</span>, <span class="cm-string">"--hap-ld"</span>, <span class="cm-string">"--hap-r2"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">validator</span>.<span class="cm-variable">validate</span>(<span class="cm-string">"--model"</span>, <span class="cm-variable">params</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">param</span> <span class="cm-operator">=</span> <span class="cm-variable">params</span>[<span class="cm-number">0</span>].<span class="cm-variable">toUpperCase</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"GENO"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--GENO"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--GENO-LD"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--GENO-R2"</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ILDModel</span>.<span class="cm-variable">GENOTYPE_LD</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"HAP"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--HAP"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--HAP-LD"</span>) <span class="cm-operator">||</span> <span class="cm-variable">param</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"--HAP-R2"</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ILDModel</span>.<span class="cm-variable">HAPLOTYPE_LD</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">ParameterException</span>(<span class="cm-string">"unable convert "</span> <span class="cm-operator">+</span> <span class="cm-variable">Arrays</span>.<span class="cm-variable">toString</span>(<span class="cm-variable">params</span>) <span class="cm-operator">+</span> <span class="cm-string">" to "</span> <span class="cm-operator">+</span> <span class="cm-variable">ILDModel</span>.<span class="cm-keyword">class</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">setOptionGroup</span>(<span class="cm-string">"LD Calculation Options"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">setDescription</span>(<span class="cm-string">"Calculate pairwise the linkage disequilibrium (hap, --hap, --hap-ld, --hap-r2) or genotypic correlation (geno, --geno, --geno-ld, --geno-r2)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">setFormat</span>(<span class="cm-string">"'-m &lt;string&gt;'"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 650px;"></div><div class="CodeMirror-gutters" style="display: none; height: 650px;"></div></div></div></pre><h2 id='项目实例'><span>项目实例</span></h2><ul><li><p><a href='https://pmglab.top/gbc'><span>GBC-1.1</span></a></p></li><li><p><span>本示例程序中的 bgzip-tools</span></p><ul><li><span>BGZIP 是生物信息学领域常用的工具，压缩原理如图：</span><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gxzexzfpv6j30xc0hyju8.jpg" referrerpolicy="no-referrer" alt="image-20220102163526022"></li><li><span>使用 </span><code>java -jar ./commandParser-1.0.jar bgzip</code><span> 使用该工具</span></li></ul></li></ul></div></div>

<script>(function (){var t=document.body.parentElement,e=[],n=null,i=document.body.classList.contains("typora-export-collapse-outline"),r=function(t,e,n){document.addEventListener(t,function(t){if(!t.defaultPrevented)for(var i=t.target;i&&i!=this;i=i.parentNode)if(i.matches(e)){!1===n.call(i,t)&&(t.preventDefault(),t.stopPropagation());break}},!1)};function o(){return t.scrollTop}r("click",".outline-expander",function(t){var e=this.closest(".outline-item-wrapper").classList;return e.contains("outline-item-open")?e.remove("outline-item-open"):e.add("outline-item-open"),c(),!1}),r("click",".outline-item",function(t){var e=this.querySelector(".outline-label");if(location.hash="#"+e.getAttribute("href"),i){var n=this.closest(".outline-item-wrapper").classList;n.contains("outline-item-open")||n.add("outline-item-open"),l(),n.add("outline-item-active")}});var a,s,u=function(){var t=o();n=null;for(var i=0;i<e.length&&e[i][1]-t<60;i++)n=e[i]},l=function(){document.querySelectorAll(".outline-item-active").forEach(t=>t.classList.remove("outline-item-active")),document.querySelectorAll(".outline-item-single.outline-item-open").forEach(t=>t.classList.remove("outline-item-open"))},c=function(){if(n){l();var t=document.querySelector('.outline-label[href="#'+(CSS.escape?CSS.escape(n[0]):n[0])+'"]');if(t)if(i){var e=t.closest(".outline-item-open>ul>.outline-item-wrapper");if(e)e.classList.add("outline-item-active");else{for(var r=(t=t.closest(".outline-item-wrapper")).parentElement.closest(".outline-item-wrapper");r;)r=(t=r).parentElement.closest(".outline-item-wrapper");t.classList.add("outline-item-active")}}else t.closest(".outline-item-wrapper").classList.add("outline-item-active")}};window.addEventListener("scroll",function(t){a&&clearTimeout(a),a=setTimeout(function(){u(),c()},300)});var f=function(){s=setTimeout(function(){!function(){e=[];var t=o();document.querySelector("#write").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(n=>{var i=n.getAttribute("id");e.push([i,t+n.getBoundingClientRect().y])})}(),u(),c()},300)};window.addEventListener("resize",function(t){s&&clearTimeout(s),f()}),f()})();</script></body>
</html>